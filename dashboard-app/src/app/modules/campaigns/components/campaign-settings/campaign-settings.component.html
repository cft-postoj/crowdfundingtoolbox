<div class="settings--body">
    <div class="settings--body--content">
        <div class="collapse-container" [ngClass]="{'flex-open':isOpened(1)}">
            <div class="collapsible--header row" (click)="openTab(1)">
                <div class="col-11">
                    GENERAL
                </div>
                <div class="col-1">
                    <label class="button-expand"
                           type="button"
                           [attr.aria-expanded]="isOpened(1)" aria-controls="general-settings">
                    </label>
                </div>
            </div>
            <div class="settings--card--wrapper" [ngbCollapse]="!isOpened(1)">
                <div class="settings--card">
                    <div class="row">
                        <div class="col">
                            <span class="font-weight-bold">{{campaign.active ? 'Actived' : 'Deactived'}}</span>
                            <app-switcher [id]="'status-switcher'"
                                          [(checked)]="campaign.active" class="float-right" [disabled]="campaign.prevent_disable"></app-switcher>
                        </div>
                    </div>
                </div>
                <div class="settings--card">
                    <div class="row">
                        <label for="campaignName" class="col-12 font-weight-bold">Campaign name</label>
                    </div>

                    <div class="editInput row">
                        <div class="col">
                            <input #campaignName id="campaignName"
                                   placeholder="Add campaign name"
                                   [(ngModel)]="campaign.name"
                                   maxlength="120">
                            <span class="actualLength">
                                {{campaign.name ? campaign.name.length : " 0 "}} / {{campaignName?.maxLength}}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="settings--card">
                    <div class="row">
                        <label for="shortDescription" class="col-12 font-weight-light">Description</label>
                    </div>
                    <div class="editInput row">
                        <div class="col">
                            <input id="shortDescription" class=""
                                   placeholder="Add short description to your campaign"
                                   [(ngModel)]="campaign.description"
                            >
                        </div>
                    </div>
                </div>
                <div class="settings--card">
                    <div class="row">
                        <div class="col-12">
                            <label class="font-weight-bold">Duration</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="bold"> Start</div>
                            <app-datepicker
                                    [selected]="startDateFormat"
                                    (dateChange)="changeStartDate($event.start)"
                                    [singleDatePicker]="true"
                                    [type]="'start'">
                            </app-datepicker>
                        </div>
                        <!--<div class="col-6">-->
                        <!--<div class="fs15">End</div>-->
                        <!--<app-datepicker-->
                        <!--[(date)]="campaign.date_to"-->
                        <!--[minDate]="campaign.date_from"-->
                        <!--[type]="'end'">-->

                        <!--</app-datepicker>-->
                        <!--</div>-->
                    </div>
                    <div class="row mt-3">
                        <div class="col bold">
                            End
                        </div>
                    </div>
                    <div class="row mt-2">
                        <app-radio-button class="col"
                                          [(currentValue)]="!campaign.promote_settings.is_end_date"
                                          (currentValueChange)="campaign.promote_settings.is_end_date=!$event"
                                          [radioButtons]="campaignEndRadioButtons"
                                          [colClass]="'col'"></app-radio-button>
                    </div>
                    <ng-container *ngIf="campaign.promote_settings.is_end_date">
                        <div class="row pt-2">
                            <div class="col-12">
                                <app-datepicker
                                        [selected]="endDateFormat"
                                        [minMomentDate]="startDate"
                                        (dateChange)="changeEndDate($event.end)"
                                        [singleDatePicker]="true"
                                        [type]="'end'">
                                </app-datepicker>
                            </div>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="!campaign.promote_settings.is_end_date">
                        <div class="row pt-2 inputs-group"
                             *ngIf="!campaign.promote_settings.is_end_date">
                            <div class="col">
                                <input type="number"
                                       class="number-currency"
                                       [(ngModel)]="campaign.promote_settings.donation_goal_value"
                                       placeholder="Insert donation goal"

                                />
                                <input type="string"
                                       class="number-currency"
                                       placeholder="EUR (€)"
                                       disabled
                                />
                            </div>
                        </div>
                    </ng-container>

                </div>
            </div>
        </div>
        <div class="collapse-container" [ngClass]="{'flex-open':isOpened(2)}">
            <div class="collapsible--header row" (click)="openTab(2)">
                <div class="col-sm-11">
                    TARGETING
                </div>
                <div class="col-sm-1">
                    <label class="button-expand"
                           type="button"
                           [attr.aria-expanded]="isOpened(2)" aria-controls="targeting-settings">
                    </label>
                </div>
            </div>
            <div class="settings--card--wrapper" [ngbCollapse]="!isOpened(2)">
                <div class="settings--card">
                    <div class="settings--card--header">
                        Based on signed status
                    </div>
                    <div class="settings--card--body">

                        <div class="row"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.signed_status.signed.active}">
                            <div class="col-10 targetBigger">Signed user</div>
                            <app-switcher class="col-2 text-right" [id]="'signed'"
                                          [(checked)]="campaign.targeting.signed_status.signed.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                        <div class="row"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.signed_status.not_signed.active}">
                            <div class="col-10 targetBigger">Not signed user</div>
                            <app-switcher class="col-2 text-right" [id]="'not_signed'"
                                          [(checked)]="campaign.targeting.signed_status.not_signed.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>
                </div>
                <div class="settings--card" [ngClass]="{'blur':!campaign.targeting.signed_status.signed.active}">
                    <div class="settings--card--header">
                        Targeting based on support
                    </div>
                    <div class="settings--card--body">
                        <div class="row" [ngClass]="{'blur--targetBigger':!campaign.targeting.support.one_time.active}">
                            <div class="col-10 targetBigger">One-time supporter</div>
                            <app-switcher class="col-2 text-right" [id]="'one-time'"
                                          [(checked)]="campaign.targeting.support.one_time.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.one_time.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.older_than.active }"
                                 disabled>
                                <div class="col-5">Payment older than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.older_than.active"
                                            [(value)]="campaign.targeting.support.one_time.older_than.value"
                                            (valueChange)="changeUsersCount()"
                                    ></app-inputNumber>
                                </div>
                                <div class="col-2">days</div>
                                <app-switcher class="col-2 text-right" [id]="'one-time__older_than'"
                                              [(checked)]="campaign.targeting.support.one_time.older_than.active"
                                              (change)="changeUsersCount()"></app-switcher>
                                <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.one_time.active}"></span>
                            </div>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.one_time.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.not_older_than.active }"
                                 disabled>
                                <div class="col-5">Payment not older than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.not_older_than.active"
                                            [(value)]="campaign.targeting.support.one_time.not_older_than.value"
                                            (valueChange)="changeUsersCount()"></app-inputNumber>
                                </div>
                                <div class="col-2">days</div>
                                <app-switcher class="col-2 text-right" [id]="'one-time__not-older-yhan'"
                                              [(checked)]="campaign.targeting.support.one_time.not_older_than.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.one_time.active}"></span>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.one_time.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.min.active }"
                                 disabled>
                                <div class="col-5">Donation bigger than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.min.active"
                                            [(value)]="campaign.targeting.support.one_time.min.value"
                                            (valueChange)="changeUsersCount()"></app-inputNumber>
                                </div>
                                <div class="col-2">€</div>
                                <app-switcher class="col-2 text-right" [id]="'one-time__min'"
                                              [(checked)]="campaign.targeting.support.one_time.min.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.one_time.active}"></span>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.one_time.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.max.active }"
                                 disabled>
                                <div class="col-5">Donation less than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.one_time.active || !campaign.targeting.support.one_time.max.active"
                                            [(value)]="campaign.targeting.support.one_time.max.value"
                                            (valueChange)="changeUsersCount()"></app-inputNumber>
                                </div>
                                <div class="col-2">€</div>
                                <app-switcher class="col-2 text-right" [id]="'one-time__max'"
                                              [(checked)]="campaign.targeting.support.one_time.max.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.one_time.active}"></span>
                        </div>
                        <hr>
                        <div class="row" [ngClass]="{'blur--targetBigger':!campaign.targeting.support.monthly.active}">
                            <div class="col-10 targetBigger">Monthly supporter</div>
                            <app-switcher class="col-2 text-right" [id]="'monthly'"
                                          [(checked)]="campaign.targeting.support.monthly.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.monthly.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.older_than.active }"
                                 disabled>
                                <div class="col-5">Last payment older than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.older_than.active"
                                            [(value)]="campaign.targeting.support.monthly.older_than.value"
                                            (valueChange)="changeUsersCount()"></app-inputNumber>
                                </div>
                                <div class="col-2">days</div>
                                <app-switcher class="col-2 text-right" [id]="'monthly__older-than'"
                                              [(checked)]="campaign.targeting.support.monthly.older_than.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.monthly.active}"></span>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.monthly.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur': !campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.not_older_than.active }"
                                 disabled>
                                <div class="col-5">Last payment not older than</div>
                                <div class="col-3">
                                    <app-inputNumber
                                            [disabled]="!campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.not_older_than.active"
                                            [(value)]="campaign.targeting.support.monthly.not_older_than.value"
                                            (valueChange)="changeUsersCount()"></app-inputNumber>
                                </div>
                                <div class="col-2">days</div>
                                <app-switcher class="col-2 text-right" [id]="'monthly__not-older-than'"
                                              [(checked)]="campaign.targeting.support.monthly.not_older_than.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.monthly.active}"></span>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.monthly.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur':!campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.min.active}">
                                <div class="col-5">
                                    Donation bigger than:
                                </div>
                                <div class="col-3">
                                    <app-inputNumber [(value)]="campaign.targeting.support.monthly.min.value"
                                                     [disabled]="!campaign.targeting.support.monthly.min.active"
                                                     (valueChange)="changeUsersCount()">
                                    </app-inputNumber>
                                </div>
                                <div class="col-2">
                                    €
                                </div>
                                <app-switcher class="col-2 text-right" [id]="'monthly__bigger-than'"
                                              [(checked)]="campaign.targeting.support.monthly.min.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.monthly.active}"></span>
                        </div>
                        <div [ngClass]="{'blur--subTarget': !campaign.targeting.support.monthly.active}">
                            <div class="row flex-center--vertical"
                                 [ngClass]="{'blur':!campaign.targeting.support.monthly.active || !campaign.targeting.support.monthly.max.active}">
                                <div class="col-5">
                                    Donation less than:
                                </div>
                                <div class="col-3">
                                    <app-inputNumber [(value)]="campaign.targeting.support.monthly.max.value"
                                                     [disabled]="!campaign.targeting.support.monthly.max.active"
                                                     (valueChange)="changeUsersCount()">
                                    </app-inputNumber>
                                </div>
                                <div class="col-2">
                                    €
                                </div>
                                <app-switcher class="col-2 text-right" [id]="'monthly__less-than'"
                                              [(checked)]="campaign.targeting.support.monthly.max.active"
                                              (change)="changeUsersCount()"></app-switcher>
                            </div>
                            <span [ngClass]="{'blur--subTarget--span': !campaign.targeting.support.monthly.active}"></span>
                        </div>
                        <hr>
                        <div class="row"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.support.not_supporter.active}">
                            <div class="col-10 targetBigger">Not supporter</div>
                            <app-switcher class="col-2 text-right" [id]="'not-donator'"
                                          [(checked)]="campaign.targeting.support.not_supporter.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>
                </div>
                <div class="settings--card">
                    <div class="settings--card--header">
                        Count of read articles
                    </div>
                    <div class="settings--card--body">
                        <div class="row flex-center--vertical"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.read_articles.today.active}">
                            <div class="col-2">
                                Today
                            </div>
                            <div class="col-2">
                                min
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.today.min"
                                                 [disabled]="!campaign.targeting.read_articles.today.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <div class="col-2">
                                max
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.today.max"
                                                 [disabled]="!campaign.targeting.read_articles.today.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <app-switcher class="col-2 text-right" [id]="'read_article_today'"
                                          [(checked)]="campaign.targeting.read_articles.today.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>
                    <div class="settings--card--body">
                        <div class="row flex-center--vertical"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.read_articles.week.active}">
                            <div class="col-2">
                                Week
                            </div>
                            <div class="col-2">
                                min
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.week.min"
                                                 [disabled]="!campaign.targeting.read_articles.week.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <div class="col-2">
                                max
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.week.max"
                                                 [disabled]="!campaign.targeting.read_articles.week.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <app-switcher class="col-2 text-right" [id]="'read_article_week'"
                                          [(checked)]="campaign.targeting.read_articles.week.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>
                    <div class="settings--card--body">
                        <div class="row flex-center--vertical"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.read_articles.month.active}">
                            <div class="col-2">
                                Month
                            </div>
                            <div class="col-2">
                                min
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.month.min"
                                                 [disabled]="!campaign.targeting.read_articles.month.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <div class="col-2">
                                max
                            </div>
                            <div class="col-2">
                                <app-inputNumber [(value)]="campaign.targeting.read_articles.month.max"
                                                 [disabled]="!campaign.targeting.read_articles.month.active"
                                                 (valueChange)="changeUsersCount()"></app-inputNumber>
                            </div>
                            <app-switcher class="col-2 text-right" [id]="'read_article_month'"
                                          [(checked)]="campaign.targeting.read_articles.month.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>

                </div>
                <div class="settings--card" [ngClass]="{'blur':!campaign.targeting.signed_status.signed.active}">
                    <div class="settings--card--header">
                        Additional settings
                    </div>
                    <div class="settings--card--body">
                        <div class="row"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.registration.after.active}">
                            <div class="col-5">Registration after:</div>
                            <div class="col-5">
                                <app-datepicker
                                        [selected]="targetingRegistrationAfterDateFormat"
                                        (dateChange)="changeTargetingRegistrationAfterDate($event.start)"
                                        [singleDatePicker]="true"
                                        [type]="'start'">
                                </app-datepicker>
                            </div>
                            <app-switcher class="col-2 text-right" [id]="'target_after'"
                                          [(checked)]="campaign.targeting.registration.after.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                        <div class="row"
                             [ngClass]="{'blur--targetBigger':!campaign.targeting.registration.before.active}">
                            <div class="col-5">Registration before:</div>
                            <div class="col-5">
                                <app-datepicker
                                        [selected]="targetingRegistrationBeforeDateFormat"
                                        (dateChange)="changeTargetingRegistrationBeforeDate($event.start)"
                                        [singleDatePicker]="true"
                                        [type]="'start'">
                                </app-datepicker>
                            </div>
                            <app-switcher class="col-2 text-right" [id]="'target_before'"
                                          [(checked)]="campaign.targeting.registration.before.active"
                                          (change)="changeUsersCount()"></app-switcher>
                        </div>
                    </div>
                </div>
                <div class="settings--card">
                    <div class="settings--card--header">
                        URL
                    </div>
                    <div class="row" [ngClass]="{'blur--targetBigger':!campaign.targeting.url.specific}">
                        <div class="col-10">Specific URLs *<br/>
                            <small><i>* if you won't specify urls, all portal urls are tracked.</i></small>
                        </div>
                        <!--                        <div class="col-10">{{campaign.targeting.url.specific?'Specific URLs':'All URLs'}}</div>-->
                        <app-switcher class="col-2 text-right" [id]="'specificUrls'"
                                      [(checked)]="campaign.targeting.url.specific"
                                      (change)="changeUsersCount()"></app-switcher>
                    </div>
                    <div class="row" [ngClass]="{'blur':!campaign.targeting.url.specific}">
                        <div class="button-group">
                            <span class="btn btn-default btn-secondary btn-xs"
                                  *ngFor="let url of campaign.targeting.url.list; index as i">
                                <span>{{url.path}}</span>
                                <a class="icon-delete float-right" (click)="campaign.targeting.url.list.splice(i, 1);changeUsersCount();">
                                    <i class="icon-delete--cross"></i>
                                </a>
                            </span>
                        </div>
                    </div>
                    <div class="editInput row" [ngClass]="{'blur':!campaign.targeting.url.specific}">
                        <div class="col-2">
                            <span class="add-button vertical-align" title="Add new color"
                                  [inlineSVG]="'/assets/images/icons/add.svg'"
                                  [removeSVGAttributes]="['fill']" (click)="addUrl()">
                            </span>
                        </div>
                        <div class="col-10">
                            <input class="ng-pristine ng-valid ng-touched" #newUrlInput id="newUrl"
                                   placeholder="Add url" [(ngModel)]="newUrl" (keydown.enter)="addUrl();changeUsersCount();"
                                   [disabled]="!campaign.targeting.url.specific">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>